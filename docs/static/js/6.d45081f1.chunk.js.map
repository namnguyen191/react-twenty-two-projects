{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","pages/Projects/InfinityScroll/InfinityScroll.tsx"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","from","test","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","unsupportedIterableToArray","TypeError","_toConsumableArray","arrayLikeToArray","iter","InfinityScroll","useState","photos","setPhotos","loading","useRef","imageQueue","getPhotos","a","console","log","current","axios","get","res","data","curPhotos","loadMoreImage","window","scrollY","document","body","offsetHeight","useEffect","title","process","addEventListener","removeEventListener","className","imagesNodes","href","links","html","target","rel","src","urls","regular","alt","alt_description","onLoad","renderImages"],"mappings":"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","file":"static/js/6.d45081f1.chunk.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import axios from 'axios';\nimport { ReactElement, useEffect, useRef, useState } from 'react';\nimport './InfinityScrollStyles.scss';\n\ntype Photo = {\n  alt_description: string;\n  urls: { regular: string };\n  links: { html: string };\n};\n\nconst TITLE = process.env.REACT_APP_APP_NAME + ' - Infinity Scroll';\n\nconst InfinityScroll: React.FC = () => {\n  const [photos, setPhotos] = useState<Photo[]>([]);\n  const loading = useRef<boolean>(false);\n  const imageQueue = useRef<number>(0);\n\n  const unsplashAPIUrl = 'https://api.unsplash.com';\n  const photoCount = 10;\n  const apiKey = '4xDG69iCRcPnbgDOKIH7qbERYgRwFpaaJhFH1m4bOjk';\n\n  const getPhotos = async () => {\n    console.log('Trigger getting photos');\n\n    loading.current = true;\n    const res = await axios.get<Photo[]>(\n      `${unsplashAPIUrl}/photos/random?client_id=${apiKey}&count=${photoCount}`\n    );\n\n    loading.current = false;\n    imageQueue.current += res.data.length;\n    setPhotos((curPhotos) => [...curPhotos, ...res.data]);\n  };\n\n  const loadMoreImage = () => {\n    if (\n      window.scrollY > document.body.offsetHeight - 1000 &&\n      !loading.current &&\n      imageQueue.current === 0\n    ) {\n      getPhotos();\n    }\n  };\n\n  const activateInfiniteScroll = () => {\n    window.addEventListener('scroll', loadMoreImage);\n  };\n\n  useEffect(() => {\n    document.title = TITLE;\n\n    getPhotos();\n\n    activateInfiniteScroll();\n\n    return () => {\n      window.removeEventListener('scroll', loadMoreImage);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const renderImages = (): ReactElement[] => {\n    let imagesNodes: ReactElement[] = [];\n\n    for (let i = 0; i < photos.length; i++) {\n      imagesNodes.push(\n        <a key={i} href={photos[i].links.html} target=\"_blank\" rel=\"noreferrer\">\n          <img\n            src={photos[i].urls.regular}\n            alt={photos[i].alt_description}\n            title={photos[i].alt_description}\n            // eslint-disable-next-line no-loop-func\n            onLoad={() => {\n              imageQueue.current -= 1;\n            }}\n          />\n        </a>\n      );\n    }\n\n    return imagesNodes;\n  };\n\n  return (\n    <div className=\"infinity-scroll-container\">\n      <h1>Unsplash API - Infinite Scroll</h1>\n      <div className=\"img-container\">{renderImages()}</div>\n      <img\n        src={process.env.REACT_APP_BASE_URL + '/images/loading-infinity.svg'}\n        alt=\"Loader Icon\"\n      />\n    </div>\n  );\n};\n\nexport default InfinityScroll;\n"],"sourceRoot":""}